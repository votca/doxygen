<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>votca: Developer and Contributor Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">votca
   &#160;<span id="projectnumber">1.5-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Developer and Contributor Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>function/class summary</p><ul>
<li>The page is designed to give new developers general guidelines for implementing code consistent with the VOTCA and cpp style and standard.<ul>
<li><a href="#Reporting-Bugs">Reporting Bugs</a></li>
<li><a href="#CPP-Resources">CPP Resoures</a></li>
<li><a href="#CPP-Tips">CPP Tips</a></li>
<li><a href="#Testing">Testing</a></li>
<li><a href="#CPP-Codeing-Style-Guide">CPP Codeing Style Guide</a></li>
<li><a href="#CPP-Comment-Guide">CPP Comment Guide</a></li>
</ul>
</li>
</ul>
<h2>Reporting Bugs</h2>
<p>To report a bug please create an issue on the appropriate github repo. Please be sure to provide as much information as possible such as:</p>
<ul>
<li>The error messages</li>
<li>The operating system</li>
<li>What compiler was used</li>
<li>What dependencies were installed</li>
<li>The calculation that was being run</li>
</ul>
<p>Issues can be directed created on the appropriate github repo:</p>
<ul>
<li><a href="https://github.com/votca/tools/issues">tools</a></li>
<li><a href="https://github.com/votca/csg/issues">csg</a></li>
<li><a href="https://github.com/votca/csgapps/issues">csgapps</a></li>
<li><a href="https://github.com/votca/csg-manual/issues">csg-manual</a></li>
<li><a href="https://github.com/votca/csg-tutorials/issues">csg-tutorials</a></li>
<li><a href="https://github.com/votca/ctp/issues">ctp</a></li>
<li><a href="https://github.com/votca/xtp/issues">xtp</a></li>
<li><a href="https://github.com/votca/votca/issues">votca</a></li>
</ul>
<h2>CPP Resources</h2>
<p>A good starting point is to take a look at the cpp standard. Though the code has not always consistently followed the cpp standard we now make an effort to really enforce it and follow best practices.</p>
<ul>
<li><a href="https://www.gitbook.com/book/lefticus/cpp-best-practices/details">Best Practices1</a></li>
<li><a href="https://google.github.io/styleguide/cppguide.html">Best Practices2</a></li>
</ul>
<h2>CPP Tips</h2>
<p>Here are a few general tips that should be followed:</p>
<h3>Files</h3>
<ul>
<li>each class goes into a separate file</li>
<li>filename is name of class in lowercase</li>
</ul>
<h3>Header Files</h3>
<ul>
<li>One class, one header.</li>
<li>When creating header gruards use the following form, where "VOTCA-REPO-NAME" is replaced by whichever repo the header is in tools/csg/ctp/xtp, and where "CLASS-NAME" is replaced by the name of the class described in the header file: <div class="fragment"><div class="line">#ifndef _VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H</div><div class="line">#define _VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H</div><div class="line">:</div><div class="line">Code</div><div class="line">:</div><div class="line">#endif // _VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H</div></div><!-- fragment --></li>
<li>Never use the "using namespace" in a header file.</li>
<li>Avoid using includes in header files. If possible forward declare a class instead.</li>
</ul>
<h3>Braces</h3>
<ul>
<li>in functions/classes, the { is in the next line</li>
<li>for for loops, if, ..., the { is n the same line as if,for</li>
</ul>
<h3>Classes</h3>
<ul>
<li>normally begin in upper case</li>
<li>exceptions: classes which define "small" types (e.g. <code>vec</code>, <code>matrix</code>)</li>
<li>order in class definition:<ul>
<li>first <code>public</code> all functions</li>
<li>then <code>private</code>/<code>protected</code> all member variables</li>
<li>then <code>private</code>/<code>protected</code> member functions</li>
<li>no rule where to define a <code>public typedef</code> in the class</li>
</ul>
</li>
<li>all member variables are <code>private</code>/<code>public</code> (again exception e.g. <code>vec</code>, <code>matrix</code>)</li>
<li>maximum one-line-function implementation in class declaration, everything else moves to separate file or inline at end of header.</li>
</ul>
<h3>Naming in Classes</h3>
<ul>
<li>all member variables are in lower case and end with <code>_</code></li>
<li>all functions start with upper case, no <code>_</code> in names</li>
<li>exception: <code>get</code>/<code>set</code> functions</li>
<li>for consistency all Ids should start at 0 not 1</li>
</ul>
<h3>get/set Functions</h3>
<ul>
<li>get/set functions start with a lowercase set/get (these are only functions which directly set/get a private member variable)</li>
<li>get must return a constant reference and keep the <code>class const</code>: <code>const int &amp;getId() const;</code></li>
<li>set only sets the member, e.g. <code>void setId(const int &amp;id) {_id=id;}</code></li>
</ul>
<h3>Functions</h3>
<ul>
<li>Make functions short.</li>
<li>Functions should not have more than one use. So use boolean arguments sparingly.</li>
</ul>
<h3>General</h3>
<ul>
<li>Do not comment out code, if you do not use it delete it.</li>
<li>Variables should have clear and explicit names.</li>
<li>Do not duplicate code.</li>
<li>Functions should have no more than 3 arguments. Otherwise create a class.</li>
<li>XYZ positions should be described using tools::vec, 3x3 matrices tools::matrix, or classes and or functions in the eigen library.</li>
<li>Readability is more important the elegant design.</li>
<li>Leave the code better than you found it.</li>
<li>Use pointers sparingly and especially try not to pass them around objects. Prefer references.</li>
<li>Do not write code, which you may use in the future. Only write code you will use now. Write code, you need later, later. This avoids cluttering the codebase with unused "at some point we will need this functions".</li>
</ul>
<h2>Testing</h2>
<p>Each repository contains a src folder. Within the src folder exists a library folder: libtools, libcsg etc... and a tools folder. A tests folder should also exist in the src folder. If it does not you should create one.</p>
<p>For every new object and algorithm created there should exist a test. We use the Boost libraries testing framework. Good documentation can be found here:</p>
<ul>
<li><a href="https://www.ibm.com/developerworks/aix/library/au-ctools1_boost/">Boost link</a></li>
</ul>
<p>We will outline the general workflow here using the vec object in <a class="el" href="namespacevotca_1_1tools.html">votca::tools</a>. This object only has a header file it is in: <a class="el" href="vec_8h.html">tools/include/votca/tools/vec.h</a></p>
<p>Determine if a tests folder has already been created or not in /src if it has not take a look at what was done in the votca-tools repo.</p>
<ol type="1">
<li>Create a test file in <a href="https://github.com/votca/tools/tree/master/src/tests">tools/src/tests/</a><a class="el" href="test__vec_8cc.html">test_vec.cc</a> must have the same name as what appears in the foreach in the CMakeLists.txt file. And place the following contents</li>
</ol>
<div class="fragment"><div class="line">#define BOOST_TEST_MAIN</div><div class="line"></div><div class="line">#define BOOST_TEST_MODULE vec_test</div><div class="line">#include &lt;boost/test/unit_test.hpp&gt;</div><div class="line">#include &lt;exception&gt;</div><div class="line"></div><div class="line">#include &lt;votca/tools/vec.h&gt;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line">using namespace votca::tools;</div><div class="line"></div><div class="line">BOOST_AUTO_TEST_SUITE(vec_test)</div><div class="line"></div><div class="line"></div><div class="line">BOOST_AUTO_TEST_CASE(test1){</div><div class="line">  vecv;</div><div class="line">  BOOST_CHECK_EQUAL(...);</div><div class="line">  BOOST_CHECK_EQUAL(...);</div><div class="line">  :</div><div class="line">}</div><div class="line">BOOST_AUTO_TEST_CASE(test2){</div><div class="line">  vecv;</div><div class="line">  BOOST_CHECK_EQUAL(...);</div><div class="line">  BOOST_CHECK_EQUAL(...);</div><div class="line">  :</div><div class="line">}</div><div class="line">:</div><div class="line">BOOST_AUTO_TEST_SUITE_END()</div></div><!-- fragment --><p>Replace the '...' and ':' with the appropriate syntax. For more info on which boost test macros to use refer to the boost documentation</p>
<ol type="1">
<li>To compile and test the code create a folder tools/build and run the following commands:</li>
</ol>
<div class="fragment"><div class="line">cmake -DENABLE_TESTING=ON ../</div><div class="line">make </div><div class="line">make test</div></div><!-- fragment --><p>Ensure you have an up to date version of cmake or use cmake3</p>
<h2>CPP Codeing Style Guide</h2>
<p>VOTCA uses the clang formatter to automatically ensure consistent style. The style is essentially the same, as what is used by google, with the exception that types and = are aligned to make the code more readable. Have a look at <code>.clang-format file</code> in the <a href="https://github.com/votca/votca/blob/master/.clang-format">main votca repository</a> for details.</p>
<p>To run the clang-format function on file.cc <br />
 </p><div class="fragment"><div class="line">clang-format -i -style=file file.cc</div></div><!-- fragment --><p>'-i' ensures it will make change to file.cc, omitting the '-i' will display the changes without implementing them. '-style=file' ensures the format is read from the .clang-format file otherwise it will use a default style guide.</p>
<h2>CPP Comment Guide</h2>
<p>It is preferential that the following guidelines be followed when adding comments to code:</p>
<ol type="1">
<li>The <code>/* */</code> comment blocks should be avoided and the <code>//</code> used in their place. This is so that the <code>/* */</code> comment blocks can be easily used for debugging.</li>
<li>It would be preferential that the following doxygen commenting stencil be used in the header files above each class and function description.</li>
</ol>
<div class="fragment"><div class="line">/**</div><div class="line">** Detailed function/class description if needed</div><div class="line">*</div><div class="line">* @param [in] - description of parameter 1</div><div class="line">* @param [out] - description of parameter 2</div><div class="line">* @param [in,out] - description of parameter 3</div><div class="line">* :</div><div class="line">* @return - description of return type</div><div class="line">*/</div></div><!-- fragment --><p>The doxygen commenting will help future developers maintain the code, in its fully compiled state it may be found at: <a href="http://doc.votca.org">http://doc.votca.org</a></p>
<p>NOTE: Compilation of the doxygen documentation is automated when code is merged into the master votca branch! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
